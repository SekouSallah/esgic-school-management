<fuse-loading-bar [autoMode]="showLoading" style="z-index: 10 !important"></fuse-loading-bar>

<div class="flex flex-col flex-auto items-center justify-center min-w-0 p-4 sm:p-6 md:p-8" id="login">
    <div class="w-full max-w-md py-8 px-4 sm:p-12 sm:rounded-2xl sm:shadow sm:bg-white bg-white mx-4 sm:mx-8 lg:mx-auto rounded-lg">

        <div class="w-full max-w-sm mx-auto">
            <!-- Logo -->
            <div class="logo">
                <img height="192" src="assets/images/logos/amasem.png" width="204" alt="Logo ESGIC">
            </div>

            <!-- Title -->
            <h1 class="login-title mt-6 text-4xl font-extrabold tracking-tight leading-tight text-center">Connexion</h1>

            <!-- Alert -->
            <fuse-alert
                *ngIf="showAlert"
                [@shake]="alert.type === 'error'"
                [appearance]="'outline'"
                [dismissible]="true"
                [showIcon]="true"
                [type]="alert.type"
                class="mt-8">
                {{ alert.message }}
            </fuse-alert>

            <!-- Sign in form -->
            <form #signInNgForm="ngForm" [formGroup]="signInForm" class="mt-8">

                <!-- Username field -->
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Nom d'utilisateur</mat-label>
                    <input [formControlName]="'username'" id="username" matInput>
                    <mat-icon class="base-icon" matSuffix>account_box</mat-icon>
                </mat-form-field>

                <!-- Password field -->
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Mot de passe</mat-label>
                    <input #passwordField [formControlName]="'password'" id="password" matInput type="password">
                    <button
                        (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                        mat-icon-button
                        matSuffix
                        type="button">
                        <mat-icon *ngIf="passwordField.type === 'password'" [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                        <mat-icon *ngIf="passwordField.type === 'text'" [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                    </button>
                </mat-form-field>

                <!-- Actions -->
                <div class="inline-flex items-center justify-between w-full mt-1.5">
                    <a [routerLink]="['/forgot-password']" class="text-md font-medium text-primary-500 hover:underline">Mot de passe oubli√©?</a>
                    <a [routerLink]="['/inscription']" class="ml-1 text-primary-500 hover:underline">S'inscrire</a>
                </div>
                <!-- Submit button -->
                <button
                    (click)="login(signInForm.value)"
                    [disabled]="signInForm.invalid"
                    class="w-full py-3 base-bg-color text-white font-bold rounded-lg hover:base-bg-color mt-3"
                    mat-flat-button>
                    Se connecter
                </button>

            </form>
        </div>
    </div>
</div>
